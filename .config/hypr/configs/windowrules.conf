#####################
###  WINDOW RULES ###
#####################

# Allow tearing (now preferably 'opaque' instead of 'immediate')
windowrule {
  name = windowrule-1
  opaque = on
  match:class = ^(cs2)$
}

windowrule {
  name = windowrule-2
  opaque = on
  match:class = ^(org\.vinegarhq\.Sober)$
}

windowrule {
  name = windowrule-3
  opaque = on
  match:class = ^(mcpelauncher-client)$
}

windowrule {
  name = windowrule-4
  opaque = on
  match:class = ^(steam_app_635260)$
}

windowrule {
  name = windowrule-5
  opaque = on
  match:class = ^(CombatMaster.x86_64)$
}


# Float preferred apps
windowrule {
  name = windowrule-6
  float = on
  match:class = ^(eog)$
}

windowrule {
  name = windowrule-7
  float = on
  match:class = ^(nautilus-fileconverter.py)$
}

windowrule {
  name = windowrule-8
  float = on
  match:class = ^(org.pulseaudio.pavucontrol)$
}

windowrule {
  name = windowrule-9
  float = on
  match:class = ^(org.gnome.Loupe)$
}

windowrule {
  name = windowrule-10
  float = on
  match:class = ^(imv)$
}

windowrule {
  name = windowrule-11
  float = on
  match:class = ^(waypaper)$
}


# Prism Launcher popups
windowrule {
  name = windowrule-12
  float = on
  size = 1100 650
  match:title = ^(?i)Console window for.*
}

windowrule {
  name = windowrule-13
  center = on
  match:title = ^(?i)console window for.*
}


# Pulsemixer
windowrule {
  name = windowrule-14
  float = on
  size = 1200 500
  center = on
  match:title = ^(pulsemixer)$
}

# 'stayfocused' removed â€” no equivalent in 0.53+

# File manager popups
windowrule {
  name = windowrule-15
  float = on
  center = on
  size = 1100 650
  match:title = ^(?i)Open folder.*
}

windowrule {
  name = windowrule-16
  float = on
  match:title = ^(?i)Rename .*
}


# XDG desktop portal
windowrule {
  name = windowrule-17
  border_size = 0
  match:class = ^(Xdg-desktop-portal-gtk)$
}


# Force-tile some apps
windowrule {
  name = windowrule-18
  tile = on
  match:class = ^(Aseprite)$
}

windowrule {
  name = windowrule-19
  tile = on
  match:class = ^(Chromium)$
}


# Bitwarden: no screen sharing
windowrule {
  name = windowrule-20
  no_screen_share = on
  match:class = ^(Bitwarden)$
}


# Fix focus issues (noinitialfocus is still valid in windowrule)
windowrule {
  name = windowrule-21
  no_initial_focus = on
  match:class = ^(resolve)$
}

windowrule {
  name = windowrule-22
  no_initial_focus = on
  match:class = ^(jetbrains-idea-ce)$
}

windowrule {
  name = windowrule-23
  no_initial_focus = on
  opacity = 1.0
  match:class = ^(affinity.exe)$
}


# Affinity opacity

# Dialogs: generic floating rules
windowrule {
  name = windowrule-24
  float = on
  match:title = ^(Select|Open)( a)? (File|Folder)(s)?$
}

windowrule {
  name = windowrule-25
  float = on
  match:title = ^File (Operation|Upload)( Progress)?$
}

windowrule {
  name = windowrule-26
  float = on
  match:title = ^.* Properties$
}

windowrule {
  name = windowrule-27
  float = on
  match:title = ^Export Image as PNG$
}

windowrule {
  name = windowrule-28
  float = on
  match:title = ^GIMP Crash Debug$
}

windowrule {
  name = windowrule-29
  float = on
  match:title = ^Save As$
}

windowrule {
  name = windowrule-30
  float = on
  match:title = ^Library$
}


# Steam
windowrule {
  name = windowrule-31
  rounding = 10
  match:class = ^(steam)$
}

windowrule {
  name = windowrule-32
  float = on
  match:title = ^Friends List$
  match:class = ^(steam)$
}

windowrule {
  name = windowrule-33
  opaque = on
  idle_inhibit = always
  match:class = ^(steam_app_[0-9]+)$
}


# VLC (XWayland)
windowrule {
  name = windowrule-34
  rounding = 2
  match:xwayland = 1
  match:class = ^(vlc)$
}


# XWayland popups (e.g., Java apps)
windowrule {
  name = windowrule-35
  no_dim = on
  no_shadow = on
  rounding = 10
  match:xwayland = 1
  match:title = ^win[0-9]+$
}


# Center all native floating windows (not XWayland)
windowrule {
  name = windowrule-36
  center = on
  match:float = 1
  match:xwayland = 0
}


# Fullscreen workspace (f[1]) adjustments
workspace = f[1], gapsout:0, gapsin:0
windowrule {
  name = windowrule-37
  border_size = 0
  rounding = 0
  match:workspace = f[1]
}


# Special workspaces
workspace = special:fm, bordersize:2
workspace = special:term, bordersize:2

# Ensure fullscreen windows are fully opaque
windowrule {
  name = windowrule-38
  opacity = 1.0
  match:fullscreen = 1
}

